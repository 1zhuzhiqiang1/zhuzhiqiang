<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.0.8 (451398)"/><meta name="keywords" content="面试技术, 自定义View"/><meta name="created" content="2015-11-10 10:39:34 +0000"/><meta name="source-url" content="file:///D:/Program%20Files/android_new/adt-bundle-windows-x86-20140702/sdk/docs/guide/topics/ui/custom-components.html"/><meta name="updated" content="2015-11-10 11:42:56 +0000"/><title>面试技术02: 自定义View理论知识</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="font-size: 19px;"><b>1. View是什么?</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1).  <font color="#E30000">View类</font>是所有用来构建用户界面的组件的<font color="#E30000">基类</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2).  <font color="#E30000">ViewGroup类</font>是View的一个子类, 是各种<font color="#E30000">布局的基类</font>,&nbsp;&nbsp;它是包含其它View或ViewGroup的<font color="#E30000">容器</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3). 一个View(ViewGroup)占用屏幕上的一个 <font color="#E30000">矩形区域</font>, 它负责界面的<font color="#E30000">绘制和事件处理</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4).&nbsp;&nbsp;手机屏幕上所有看得见摸得着的都是View(包括ViewGroup) </div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>2. View的分类</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1). &nbsp;&nbsp; <font color="#E30000">不能包含子View的View: 一般的View</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextView : 显示文本(它也可以带图片) </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Button : 按钮 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ImageView : 显示图片 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EditText : 文本输入框 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RadioButton : 单选按钮 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Checkbox : 多选按钮 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2).  <font color="#E30000">可以包含子View的View: ViewGroup</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FrameLayout : 帧布局 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RelativeLayout : 相对布局 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LinearLayout : 线性布局 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ScrollView : 可滚动的视图 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ListView : 列表视图 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GridView : 风格视图 </div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>3. ViewGroup类</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1). class ViewGroup extends View implements ViewParent, ViewManager </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2).&nbsp;&nbsp;ViewManager:&nbsp;&nbsp;用来添加、删除、更新布局 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>addView(View v)</b></div><div style="font-size: 19px;"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; removeView(View v) </b></div><div style="font-size: 19px;"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateViewLayout(View v) </b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3).&nbsp;&nbsp;ViewParent:&nbsp;&nbsp;提供了一系列操作子View的方法 </div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>4. 关于View和ViewGroup</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1). 手机屏幕上的整个界面只有一个 <b>根View</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.&nbsp;&nbsp;得到它: getWindow().getDecorview() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->PhoneWindow$decorView </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b.&nbsp;&nbsp;本质类型: FrameLayout </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c.&nbsp;&nbsp; <b>setContentView()</b>添加的视图不是整个界面的根view &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2).&nbsp;&nbsp;一个View只会有一个父View(ViewGroup), 一个ViewGroup可以有多个子View </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.&nbsp;&nbsp;得到父视图:  <b>view.getParent()</b>, 可以将返回的ViewParent强转为指定的ViewGroup</div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>5. 区别View与Activity?</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1). Activity是四大组件中唯一能 <b>与用户进行直接交互</b>的组件</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2). Activity只是 <b>控制和管理View</b>, 真正<b>显示和处理事件</b>的是View本身来完成</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3). Activity内部有一个window对象, window对象(Phonewindow)中包含一个FramLayout类型的decorView </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在Activity中setContentView(view)实质上是将view添加到decorView中 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 手机屏幕中显示的根布局就是decorView </div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>6. 显示ContentView的3种方式:</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1).&nbsp;&nbsp;setContentView(R.layout.activity_main); </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2).&nbsp;&nbsp;View view = View.inflate(this, R.layout.activity_main, null); </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setContentView(view); </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3).&nbsp;&nbsp;MyTextView tv = new MyTextView(this); </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setContentView(tv); </div><div style="font-size: 19px;"><hr/></div><div style="font-size: 19px;"><b>7. View的生命周期过程:</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>1). 创建View对象</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. 存在2种创建的方式:  <font color="#E30000">加载布局文件</font>创建和<font color="#E30000">直接new构造方法</font>创建</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. 布局文件方式的本质: 解析布局xml, 根据标签名创建对应的View对象, 并将标签属性设置到对象中(构造方法) </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c.&nbsp;&nbsp;布局文件方式: 在所有的View对象都创建好了后, 会调用 <font color="#E30000">onFinishInflate()</font></div><div style="font-size: 19px;"><font color="#E30000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font>&nbsp;&nbsp; d. 在视图对象都创建好后, 调用 <font color="#E30000">onAttachedToWindow()</font>, 表明view对象关联到window上了</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------------------------------------------------------------------------------------- </div><div style="font-size: 19px;"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2). 测量(多大?) </b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.方法执行:  <font color="#E30000">measure()</font>---&gt;<font color="#E30000">onMeasure()</font>---&gt;<font color="#E30000">setMeasuredDimension()</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. measure(): 用来确定当前View的大小, 它是final的方法不能重写, 它内部调用了onMeasure() </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c.onMeasure(): 一般重写此方法, 根据我们的实际需求, 对View进行测量修改, 并保存宽高 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d.&nbsp;&nbsp;setMeasuredDimension(): onMeasure()中必须调用些方法保存当前View的宽度和高度 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------------------------------------------------------------------------------------- </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>3). 布局(在哪?)</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. 方法执行:  <font color="#E30000">layout()</font>---&gt;<font color="#E30000">onLayout()</font></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. layout(l, t, r, b):&nbsp;&nbsp; </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;①.&nbsp;&nbsp;指定View的左上角点的坐标和右下角点的坐标 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;②.&nbsp;&nbsp;比较原有的l,t,r,b与当前的l,t,r,b, 如果有变化了或请求重新layout, 就会调用onLayout(l,t,r,b) </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;③. 不会重写些方法, 只会调用些方法来指定当前View在父View中的位置 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c. onLayout(changed, l, t, r, b) </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;①.&nbsp;&nbsp;决定当前view在父ViewGroup中的位置 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;②.&nbsp;&nbsp;在View类中只是空实现, View还不知道在此方法中做什么工作, 需要子View来去重写此方法实现所需要的 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;③.&nbsp;&nbsp;在ViewGroup类中用来指定子View的位置, 但是abstract </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FrameLayout </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LinearLayout </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RelativeLayout </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;④.&nbsp;&nbsp;LinearLayout的实现: </div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 判断自身是横屏还是竖屏? </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;遍历所有的子View, 为它们准备l,t,r,b </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果是垂直: </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A &nbsp;&nbsp;(0,0,width1,height1), </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B (0,height1,width2,height1+height2), </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C (0,height1+height2,width3,height1+height2+height3) </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果是水平: </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (0,0,width1,height1), </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (height1,0,height1+width2,height2), </blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (height1+height2,0,height1+height2+width3,height3)<span style="text-align: left;">&nbsp;&nbsp;&nbsp;&nbsp; </span></blockquote></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"/><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d. 可以通过 <font color="#E30000">requestLayout()</font>的方式来强制重新layout</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------------------------------------------------------------------------------------- </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>4). 绘制(啥样?)</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. 方法执行:&nbsp;&nbsp; <font color="#E30000">draw()</font>---&gt;<font color="#E30000">onDraw()</font></div><div style="font-size: 19px;"><font color="#E30000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font> b. draw():&nbsp;&nbsp;</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;①.&nbsp;&nbsp;画一些通用的东西(如背景,滚动条等), 一般不会去重写此方法 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1>. Draw the background(画背景) </div><span style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2>. Draw view's content(画内容) </span><br style="font-size: 19px;"/><span style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3>. Draw children(画子View) </span><br style="font-size: 19px;"/><span style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4>. Draw decorations scrollbars (画滚动条) </span><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;②.&nbsp;&nbsp;如果是View, 使用onDraw(canvas)来画界面 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;③.&nbsp;&nbsp;如果是ViewGroup, 使用 <font color="#E30000">dispatchDraw(canvas)</font>---分发给子View绘制<br/><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c.&nbsp;&nbsp;onDraw(Canvas canvas) </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;①. 所有特定的View(比如:TextView/ImageView)都重写了此方法来绘制自己的样子 <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;②. 主要使用Paint和Canvas来绘制 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d. 可以通过调用 <font color="#E30000">inValidate()</font>或<font color="#E30000">postInValidate()</font>来强制重绘</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------------------------------------------------------------------------------------- </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp; <b>&nbsp;&nbsp;5). 事件处理:&nbsp;&nbsp;</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a. 相关方法:&nbsp;&nbsp; </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onTouchEvent(MotionEvent): 触摸事件的回调方法 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OnTouchListener--->onTouch(View v, MotionEvent event) : 触摸事件的监听器 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. 事件的分发和处理过程 </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------------------------------------------------------------------------------------- </div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>6). 死亡:</b></div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b. 相关方法:&nbsp;&nbsp; <font color="#FF0000">onDetachedFromWindow</font>()</div><div style="font-size: 19px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c. 当Activity退出或当前View被移除触发 </div><div style="font-size: 19px;"><hr/><b>8. 总结:&nbsp;&nbsp;</b></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 19px;"><div>creation</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二种方式 : new 构造方法(context) , &nbsp;&nbsp;定义布局文件再加载(setContentView()/View.inflate()---(context, AttributeSet)) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全类名<TextView> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <com.atguigu.MyTextView> </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所有View对象都创建好了--->onFinishInflate()[必须是布局文件]--->onAttachToWindow() &nbsp;&nbsp;--->getViewAt(int position) </div><div>measure(多大?)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->measure()--->onMearsure() &nbsp;&nbsp;&nbsp;&nbsp;产生一个测量的尺寸(宽高) &nbsp;&nbsp;--->getMearsureHeight() &nbsp;&nbsp;getMearsureWidth() &nbsp;&nbsp;&nbsp;&nbsp; -->onResume() </div><div>layout(在哪?)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--->layout(l, t, r, b)--->onLayout(boolean change, l, t, r, b) </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestLayout(): 强制重新布局 </div><div>draw(撒样?)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw()--->onDraw() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalidate()/postInvalidate(): 强制重绘 </div><div>event deal</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onTouchEvent() </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true; &nbsp;&nbsp;消费事件 &nbsp;&nbsp;&nbsp;&nbsp; --->拦截事件 </div><div>die</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onDetachedFromWindow() </div></blockquote><div style="font-size: 19px;"><hr/><div><b><br/></b></div></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><br/></div><div><br/></div></body></html>